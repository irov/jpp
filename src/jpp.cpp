#include "jpp/jpp.hpp"

#include "jansson.h"

namespace jpp
{
    //////////////////////////////////////////////////////////////////////////
    object::object()
        : m_object(nullptr)
    {
    }
    //////////////////////////////////////////////////////////////////////////
    object::~object()
    {
        json_decref(m_object);
    }
    //////////////////////////////////////////////////////////////////////////
    object::object(nullptr_t)
        : object()
    {
    }
    //////////////////////////////////////////////////////////////////////////
    object::object(json_t* _object)
        : m_object(_object)
    {
        json_incref(m_object);
    }
    //////////////////////////////////////////////////////////////////////////
    object::object(const object& _object)
        : object(_object.get())
    {
    }
    //////////////////////////////////////////////////////////////////////////
    object::object(object&& _object)
        : m_object(_object.get())
    {
        _object.reset();
    }
    //////////////////////////////////////////////////////////////////////////
    json_t* object::get() const
    {
        return m_object;
    }
    //////////////////////////////////////////////////////////////////////////
    void object::reset()
    {
        m_object = nullptr;
    }
}
